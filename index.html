<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Construindo aplicações resilientes pra prover serviços confiáveis</title>


    <link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/black.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- Printing and PDF exports -->
	<script>
      var link = document.createElement('link');
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName('head')[0].appendChild(link);
	</script>

	<style>
		.red {
			color: red;
		}

		.blue {
			color: #1b91ff;
		}

		.green {
			color: #c1ff0b;
		}

		.orange {
			color: orange;
		}

		.gray {
			color: #3f3f3f;
		}

		.yellow {
			color: #F4FF77;
		}

		.black {
			color: black;
		}

		.shadowed {
			text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
		}
	</style>

</head>
<body>
<div class="reveal">
	<div class="slides">

        <section>
            <h1 class="shadowed">
                Construindo aplicações <span class="red">resilientes</span> pra prover serviços <span class="green">confiáveis</span>
            </h1>
            <p class="shadowed">
                <small>
                    <a href="http://mauricio.github.io/">Maurício Linhares</a> /
                    <a href="http://twitter.com/mauriciojr">@mauriciojr</a> /
                    <span class="shadowed">Tech Lead na DigitalOcean/Co-host do podcast <a href="http://hipsters.tech/">hipsters.tech</a></span>
                </small>
            </p>
        </section>

        <section>
            <h1>Resiliência</h1>
            <ul>
                <li>a capacidade de se recuperar <span class="green">rapidademente</span> de dificuldades</li>
                <li>a capacidade de uma substânicia ou objeto de <span class="orange">retornar</span> a sua forma original</li>
            </ul>
        </section>

        <section>
            <h1>Aplicações <span class="green">resilientes</span></h1>
            <ul>
                <li>Aguentam o stress e voltam ao normal sem <span class="yellow">intervenção humana</span></li>
                <li>Se recuperam de falhas <span class="blue">temporárias</span> e continuam a servir tráfego</li>
            </ul>
        </section>

        <section>
            <h1>O que podemos fazer pra construir aplicações <span class="yellow">resilientes</span>?</h1>
        </section>

        <section>
            <h1>Pontos de <span class="orange">integração</span></h1>
            <p>Sempre espere o <span class="red">pior</span>, seja cínico</p>
        </section>

		<section>
			<h1>Boeing <span class="orange">737 MAX</span></h1>
		</section>

		<section>
			<h1>Não falhe ao  <span class="blue">iniciar</span></h1>
			<p>
				Sua aplicação não deve exigir acesso a uma <span class="orange">integração</span> para iniciar, ela pode não funcionar completamente mas deve sempre subir.
			</p>
		</section>

		<section>
			<h1>O <span class="red">mistério</span> da dependência circular</h1>
			<p>Eu não posso começar porque você não começou, você não pode começar porque eu não comecei</p>
		</section>

		<section>
			<h1>Não use integrações em <span class="green">health checks</span></h1>
			<p>
				O health check da sua aplicação chama uma integração? <span class="red">ERRADO</span>.
			</p>
		</section>

		<section>
			<h1>Automatize tudo <span class="green">cuidadosamente</span></h1>
            <p>Automações que falham ou se desconectam do estado real são muito mais perigosas do que não ter automação nenhuma</p>
		</section>

        <section>
            <h1>Reddit e Zookeeper <span class="orange">vão passear</span> em 2016</h1>
            <ul>
                <li>Autoscaler é desligado</li>
                <li>ZK começa a ser migrado</li>
                <li>Autoscaler sobe outra vez por acidente</li>
                <li>Tiro, porrada e bomba</li>
            </ul>
        </section>

        <section>
            <h1>Mate infra estrutura <span class="blue">lentamente</span></h1>
            <p>Você não quer ser <span class="red">agressivo</span> aqui</p>
        </section>

		<section>
			<h1>Considere o <span class="orange">tempo de inicialização</span> quando estiver fazendo scale ups</h1>
			<p>
                Autoscaling de 10 pra 100 máquinas porque você esqueceu de contar o tempo de inicialização vai <span class="red">derrubar o seu serviço</span>.
			</p>
		</section>

		<section>
			<h1><span class="green">Limite</span> a criação automática de infra estrutura</h1>
			<p>
                Qualquer software que cria novos recursos baseados em métricas e tráfego precisam de <span class="red">limites bem definidos</span>.
				Sua conta bancária e os serviços que você chama vão agradecer.
			</p>
		</section>

        <section>
            <h1>Mudanças bruscas são <span class="red">um mau sinal</span></h1>
            <p>
                Automação deve simplesmente parar e pedir intervenção humana antes de tentar causar uma mudança <span class="green">muito grave</span> no sistema.</p>
        </section>

		<section>
			<h1>Tem uma <span class="green">CDN</span>?</h1>
			<p>
				<span class="red">Bloqueie</span> acesso direto a todos os recursos que a CDN está servindo.
			</p>
		</section>

        <section>
            <h1>Encontre a sua operação <span class="red">mais cara</span></h1>
            <p>
                O que acontece se você <span class="green">spammar ela</span>?
            </p>
        </section>

		<section>
			<h1>Timeouts <span class="red">em todos os lugares</span></h1>
			<p>
                Nenhuma chamada é <span class="green">confiável</span> o suficiente, todas as operações devem ter um timeout (preferencialmente curto) associado a ela.
			</p>
		</section>

		<section>
			<h1>Use proxies se você não controla o sistema que precisa ser melhorado</h1>
			<ul>
				<li>Envoy</li>
				<li>Linkerd</li>
				<li>ProxySQL</li>
				<li>PGBouncer</li>
				<li>HAproxy</li>
			</ul>
		</section>

		<section>
			<h1><span class="green">Circuit breakers</span> são seus amigos</h1>
			<p>
				Espera, <span class="red">o que é</span> um circuit breaker (ou disjuntor)?
			</p>
		</section>

		<section>
			<h1>Muitos <span class="red">erros</span>? Desame ele!</h1>
			<ul>
				<li>

					Assim que uma dependência <span class="orange">falhou demais</span>, o circuito <span class="yellow">abre</span>
					e pára de mandar requisições
				</li>
				<li>
                    Você pode ter uma <span class="blue">reposta padrão</span> pra casos de falha, dados de um cache ou uma resposta vazia.
				</li>
			</ul>
		</section>

        <section>
            <h1>Recuperação</h1>
            <ul>
                <li>
                    De vez em quando uma requisição deve passar <span class="yellow">pro serviço com problemas</span>
                </li>
                <li>
                    Assim que um número suficiente de requisições <span class="green">tiver sucesso</span>
                    você pode voltar a chamar a dependência.
                </li>
            </ul>
        </section>

        <section>
            <h1>Por que perder tempo com isso?</h1>
            <ul>
                <li>Protege <span class="green">os serviços que você chama</span> de uma sobrecarga de requisições</li>
                <li>Força quem chama a pensar em <span class="red">modos de falha</span></li>
            </ul>
        </section>

        <section>
            <h1>Modos de falha são uma <span class="red">decisão de negócio</span></h1>
            <p>
                <span class="orange">Tudo quebra</span>, esteja pronto pra lidar com isso.
            </p>
        </section>

		<section>
			<h1>Use divisórias</h1>
			<ul>
				<li>
                    Crie <span class="red">cópias</span> do sistema em regiões, data centers e até mesmo provedores de nuvem diferentes.
				</li>
				<li>
					Descubra quem são seus  <span class="green">usuários mais caros</span> (os que pagam as suas contas!) e separe eles do resto.
				</li>
				<li>
					Use chamadas e destinos diferentes pra clientes com <span class="blue">necessidades diferentes</span>.
				</li>
			</ul>
		</section>

		<section>
			<h1>Falhe <span class="red">rápido</span></h1>
			<ul>
				<li>
                    Quanto mais usuários esperam, maiores as chances deles saírem ou se chatearem com o serviço</li>
				<li>
                    Qualquer transação que demore mais do que alguns poucos segundos já falhou do ponto de vista do usuário</li>
				<li>
                    Execute processos longos em <span class="blue">background</span> e dê retorno depois</li>
				<li>Modos de falha são uma <span class="green">decisão de negócio</span></li>
			</ul>
		</section>

		<section>
			<h1>Não <span class="red">tente outra vez</span> rapidamente</h1>
			<ul>
				<li>
                    Se acabou de quebrar, tentar outra vez <span class="yellow">dificilmente</span> vai fazer funcionar
                    </li>
				<li>Use <span class="orange">backoffs</span>, execute em background, espere por mais tempo</li>
				<li>Avise ao usuário <span class="green" >depois</span> se foi impossível completar a operação</li>
			</ul>
		</section>

		<section>
			<h1><span class="red">Rate limit</span> quem chama o seu serviço</h1>
			<ul>
				<li>O seu serviço não vai aguentar <span class="blue">tráfego infinito</span></li>
				<li>Um cliente <span class="orange">problemático</span> poderia inundar você de tráfego e tirar o serviço completamente do ar
				</li>
				<li>Crie um <span class="green">limite bem definido</span>
                    de o quanto cada serviço pode chamar você e negue operações se eles forem além desse limite
				</li>
			</ul>
		</section>

		<section>
			<h1>Teste usando <span class="red">erros de protocolo</span></h1>
			<ul>
				<li>Meia mensagem</li>
				<li><span class="green">Lixo</span></li>
				<li>Conteúdo inesperado</li>
				<li>Use sua <span class="blue">imaginação</span></li>
			</ul>
		</section>

		<section>
			<h1>Resiliência não é <span class="red">grátis</span></h1>
			<p>
				Mas <span class="green">desastres</span> também não são. Encontre o seu equilíbrio.
			</p>
		</section>

		<section>
			<h1><span class="green">Dúvidas?</span></h1>
		</section>

		<section>
			<h1>
				Obrigado!
			</h1>
			<ul>
				<li>
					<a href="https://pragprog.com/book/mnee2/release-it-second-edition">
						Release It! Design and Deploy Production-Ready Software - Michael Nygard
					</a>
				</li>
				<li>
					<a href="https://samnewman.io/books/building_microservices/">
						Building Microservices - Designing fine grained systems - Sam Newman
					</a>
				</li>
				<li>
					<a href="http://shop.oreilly.com/product/0636920072768.do">
						Designing distributed systems - Patterns and paradigms for Scalable, Reliable Services - Brendam
						Burns
					</a>
				</li>
			</ul>
		</section>

	</div>

</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>
  // More info about config & dependencies:
  // - https://github.com/hakimel/reveal.js#configuration
  // - https://github.com/hakimel/reveal.js#dependencies
  Reveal.initialize({
    dependencies: [
      {src: 'plugin/markdown/marked.js'},
      {src: 'plugin/markdown/markdown.js'},
      {src: 'plugin/notes/notes.js', async: true},
      {
        src: 'plugin/highlight/highlight.js', async: true, callback: function () {
          hljs.initHighlightingOnLoad();
        }
      }
    ]
  });
</script>
</body>
</html>
